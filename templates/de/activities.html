{% extends "base.html" %}

{% block title %}Lernaktivitäten{% endblock %}

{% block head %}
<style>
    .activity-card {
        border-radius: 15px;
        transition: all 0.3s;
        border: none;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    }
    .activity-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    .activity-type-badge {
        position: absolute;
        top: -10px;
        right: 20px;
        font-size: 0.75rem;
    }
    .skill-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }
    .progress-mini {
        height: 6px;
        border-radius: 3px;
    }
    .activity-item {
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 10px;
        background: #f8f9fa;
        border-left: 4px solid;
    }
    .activity-item.literacy { border-left-color: #4CAF50; }
    .activity-item.numeracy { border-left-color: #2196F3; }
    .activity-item.digital { border-left-color: #9C27B0; }
    .activity-item.citizenship { border-left-color: #FF9800; }
    .filter-chip {
        display: inline-block;
        padding: 5px 15px;
        border-radius: 20px;
        margin: 3px;
        cursor: pointer;
        transition: all 0.2s;
        border: 2px solid transparent;
    }
    .filter-chip:hover {
        border-color: currentColor;
    }
    .filter-chip.active {
        color: white !important;
    }
</style>
{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('landing', lang=lang) }}">Projekt</a></li>
                <li class="breadcrumb-item"><span class="badge bg-warning text-dark">WP3</span> Pilotprojekte</li>
                <li class="breadcrumb-item active">Lernaktivitäten</li>
            </ol>
        </nav>
        <h1><i class="bi bi-puzzle text-success"></i> Lernaktivitäten</h1>
        <p class="text-muted lead">
            Kurze Übungen, Mikroaufgaben, angeleitete Reflexionen und digitale Herausforderungen entlang des Lernpfades.
            Diese Aktivitäten sind Teil des Lernprozesses und ermöglichen es uns, den Fortschritt zu beobachten.
        </p>
    </div>
</div>

<!-- Info Alert -->
<div class="alert alert-success mb-4">
    <div class="row align-items-center">
        <div class="col-auto">
            <i class="bi bi-lightbulb fs-3"></i>
        </div>
        <div class="col">
            <strong>Zwischenaktivitäten:</strong> Diese zählen nicht als formale Bewertung. Ihr Zweck ist es,
            das Lernen zu vertiefen, Konzepte zu üben und dem System zu ermöglichen, beobachtbare Lernsignale
            zu erfassen, um den personalisierten Lernpfad anzupassen.
        </div>
    </div>
</div>

<!-- Filters -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-body py-3">
                <div class="row align-items-center">
                    <div class="col-auto">
                        <strong><i class="bi bi-funnel me-2"></i>Filtern nach:</strong>
                    </div>
                    <div class="col">
                        <span class="filter-chip bg-light text-success active" data-skill="all" style="background: #4CAF50 !important;">Alle</span>
                        <span class="filter-chip bg-light" style="color: #4CAF50;" data-skill="literacy">Lesekompetenz</span>
                        <span class="filter-chip bg-light" style="color: #2196F3;" data-skill="numeracy">Rechenkompetenz</span>
                        <span class="filter-chip bg-light" style="color: #9C27B0;" data-skill="digital">Digital</span>
                        <span class="filter-chip bg-light" style="color: #FF9800;" data-skill="citizenship">Staatsbürgerschaft</span>
                    </div>
                    <div class="col-auto">
                        <select class="form-select form-select-sm" style="width: auto;">
                            <option>Alle Typen</option>
                            <option>Kurze Übungen</option>
                            <option>Mikroaufgaben</option>
                            <option>Angeleitete Reflexionen</option>
                            <option>Digitale Herausforderungen</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Activity Types Overview -->
<div class="row mb-4 g-3">
    <div class="col-md-3">
        <div class="card text-center h-100" style="border-top: 4px solid #17a2b8;">
            <div class="card-body">
                <i class="bi bi-pencil-square fs-1 text-info"></i>
                <h6 class="mt-2">Kurze Übungen</h6>
                <p class="small text-muted mb-0">Schnelle Fragen zur Überprüfung des Verständnisses</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center h-100" style="border-top: 4px solid #28a745;">
            <div class="card-body">
                <i class="bi bi-list-task fs-1 text-success"></i>
                <h6 class="mt-2">Mikroaufgaben</h6>
                <p class="small text-muted mb-0">Praktische Aktivitäten von 5-10 Minuten</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center h-100" style="border-top: 4px solid #ffc107;">
            <div class="card-body">
                <i class="bi bi-chat-quote fs-1 text-warning"></i>
                <h6 class="mt-2">Angeleitete Reflexionen</h6>
                <p class="small text-muted mb-0">Offene Fragen für tieferes Verständnis</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-center h-100" style="border-top: 4px solid #dc3545;">
            <div class="card-body">
                <i class="bi bi-trophy fs-1 text-danger"></i>
                <h6 class="mt-2">Digitale Herausforderungen</h6>
                <p class="small text-muted mb-0">Interaktive gamifizierte Herausforderungen</p>
            </div>
        </div>
    </div>
</div>

<!-- Activities Grid -->
<div class="row g-4" id="activities-container">
    <!-- Digital Skills Activities -->
    <div class="col-md-6 activity-card-wrapper" data-skill="digital">
        <div class="card activity-card h-100 position-relative">
            <span class="badge activity-type-badge" style="background: #9C27B0;">Digital</span>
            <div class="card-body">
                <div class="d-flex align-items-start mb-3">
                    <div class="skill-icon me-3" style="background: rgba(156,39,176,0.1);">
                        <i class="bi bi-laptop" style="color: #9C27B0;"></i>
                    </div>
                    <div>
                        <h5 class="mb-1">Phishing erkennen</h5>
                        <p class="text-muted small mb-0">Digitale Herausforderung - 10 Min.</p>
                    </div>
                </div>
                <p class="small">Analysieren Sie 5 E-Mails und bestimmen Sie, welche Phishing-Versuche sind. Begründen Sie Ihre Entscheidung.</p>
                <div class="d-flex flex-wrap gap-1 mb-3">
                    <span class="badge bg-light text-dark">Sicherheit</span>
                    <span class="badge bg-light text-dark">Kritisches Denken</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="progress flex-grow-1 me-3 progress-mini">
                        <div class="progress-bar" style="width: 0%; background: #9C27B0;"></div>
                    </div>
                    <button class="btn btn-sm btn-outline-primary">Starten</button>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 activity-card-wrapper" data-skill="digital">
        <div class="card activity-card h-100 position-relative">
            <span class="badge activity-type-badge" style="background: #9C27B0;">Digital</span>
            <div class="card-body">
                <div class="d-flex align-items-start mb-3">
                    <div class="skill-icon me-3" style="background: rgba(156,39,176,0.1);">
                        <i class="bi bi-search" style="color: #9C27B0;"></i>
                    </div>
                    <div>
                        <h5 class="mb-1">Webquellen bewerten</h5>
                        <p class="text-muted small mb-0">Kurze Übung - 5 Min.</p>
                    </div>
                </div>
                <p class="small">Klassifizieren Sie 6 Websites nach ihrer Zuverlässigkeit anhand der CRAAP-Kriterien.</p>
                <div class="d-flex flex-wrap gap-1 mb-3">
                    <span class="badge bg-light text-dark">Suche</span>
                    <span class="badge bg-light text-dark">Bewertung</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="progress flex-grow-1 me-3 progress-mini">
                        <div class="progress-bar" style="width: 30%; background: #9C27B0;"></div>
                    </div>
                    <button class="btn btn-sm btn-outline-primary">Fortsetzen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Citizenship Activities -->
    <div class="col-md-6 activity-card-wrapper" data-skill="citizenship">
        <div class="card activity-card h-100 position-relative">
            <span class="badge activity-type-badge bg-warning text-dark">Staatsbürgerschaft</span>
            <div class="card-body">
                <div class="d-flex align-items-start mb-3">
                    <div class="skill-icon me-3" style="background: rgba(255,152,0,0.1);">
                        <i class="bi bi-newspaper" style="color: #FF9800;"></i>
                    </div>
                    <div>
                        <h5 class="mb-1">Fake-News-Detektiv</h5>
                        <p class="text-muted small mb-0">Digitale Herausforderung - 15 Min.</p>
                    </div>
                </div>
                <p class="small">Untersuchen Sie 3 Nachrichtenartikel und bestimmen Sie deren Wahrheitsgehalt mit Faktenprüfungs-Tools.</p>
                <div class="d-flex flex-wrap gap-1 mb-3">
                    <span class="badge bg-light text-dark">Medienkompetenz</span>
                    <span class="badge bg-light text-dark">Verifizierung</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="progress flex-grow-1 me-3 progress-mini">
                        <div class="progress-bar bg-warning" style="width: 0%;"></div>
                    </div>
                    <button class="btn btn-sm btn-outline-warning">Starten</button>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 activity-card-wrapper" data-skill="citizenship">
        <div class="card activity-card h-100 position-relative">
            <span class="badge activity-type-badge bg-warning text-dark">Staatsbürgerschaft</span>
            <div class="card-body">
                <div class="d-flex align-items-start mb-3">
                    <div class="skill-icon me-3" style="background: rgba(255,152,0,0.1);">
                        <i class="bi bi-globe-americas" style="color: #FF9800;"></i>
                    </div>
                    <div>
                        <h5 class="mb-1">Mein ökologischer Fußabdruck</h5>
                        <p class="text-muted small mb-0">Angeleitete Reflexion - 10 Min.</p>
                    </div>
                </div>
                <p class="small">Berechnen Sie Ihren wöchentlichen CO2-Fußabdruck und schlagen Sie 3 Maßnahmen zu dessen Reduzierung vor.</p>
                <div class="d-flex flex-wrap gap-1 mb-3">
                    <span class="badge bg-light text-dark">Nachhaltigkeit</span>
                    <span class="badge bg-light text-dark">SDGs</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="progress flex-grow-1 me-3 progress-mini">
                        <div class="progress-bar bg-warning" style="width: 60%;"></div>
                    </div>
                    <button class="btn btn-sm btn-outline-warning">Fortsetzen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Literacy Activities -->
    <div class="col-md-6 activity-card-wrapper" data-skill="literacy">
        <div class="card activity-card h-100 position-relative">
            <span class="badge activity-type-badge bg-success">Lesekompetenz</span>
            <div class="card-body">
                <div class="d-flex align-items-start mb-3">
                    <div class="skill-icon me-3" style="background: rgba(76,175,80,0.1);">
                        <i class="bi bi-book" style="color: #4CAF50;"></i>
                    </div>
                    <div>
                        <h5 class="mb-1">Leseverständnis</h5>
                        <p class="text-muted small mb-0">Kurze Übung - 8 Min.</p>
                    </div>
                </div>
                <p class="small">Lesen Sie einen Artikel über KI und beantworten Sie wörtliche und schlussfolgernde Verständnisfragen.</p>
                <div class="d-flex flex-wrap gap-1 mb-3">
                    <span class="badge bg-light text-dark">Verständnis</span>
                    <span class="badge bg-light text-dark">Schlussfolgerung</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="progress flex-grow-1 me-3 progress-mini">
                        <div class="progress-bar bg-success" style="width: 100%;"></div>
                    </div>
                    <button class="btn btn-sm btn-success" disabled>Abgeschlossen</button>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 activity-card-wrapper" data-skill="literacy">
        <div class="card activity-card h-100 position-relative">
            <span class="badge activity-type-badge bg-success">Lesekompetenz</span>
            <div class="card-body">
                <div class="d-flex align-items-start mb-3">
                    <div class="skill-icon me-3" style="background: rgba(76,175,80,0.1);">
                        <i class="bi bi-chat-left-text" style="color: #4CAF50;"></i>
                    </div>
                    <div>
                        <h5 class="mb-1">Begründen Sie Ihre Position</h5>
                        <p class="text-muted small mb-0">Angeleitete Reflexion - 12 Min.</p>
                    </div>
                </div>
                <p class="small">Schreiben Sie einen argumentativen Absatz über die Nutzung von Mobiltelefonen im Unterricht.</p>
                <div class="d-flex flex-wrap gap-1 mb-3">
                    <span class="badge bg-light text-dark">Argumentation</span>
                    <span class="badge bg-light text-dark">Schriftlicher Ausdruck</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="progress flex-grow-1 me-3 progress-mini">
                        <div class="progress-bar bg-success" style="width: 0%;"></div>
                    </div>
                    <button class="btn btn-sm btn-outline-success">Starten</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Numeracy Activities -->
    <div class="col-md-6 activity-card-wrapper" data-skill="numeracy">
        <div class="card activity-card h-100 position-relative">
            <span class="badge activity-type-badge bg-primary">Rechenkompetenz</span>
            <div class="card-body">
                <div class="d-flex align-items-start mb-3">
                    <div class="skill-icon me-3" style="background: rgba(33,150,243,0.1);">
                        <i class="bi bi-bar-chart" style="color: #2196F3;"></i>
                    </div>
                    <div>
                        <h5 class="mb-1">Die Grafik interpretieren</h5>
                        <p class="text-muted small mb-0">Kurze Übung - 6 Min.</p>
                    </div>
                </div>
                <p class="small">Analysieren Sie eine Grafik über die Nutzung sozialer Medien und beantworten Sie Fragen.</p>
                <div class="d-flex flex-wrap gap-1 mb-3">
                    <span class="badge bg-light text-dark">Grafiken</span>
                    <span class="badge bg-light text-dark">Statistik</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="progress flex-grow-1 me-3 progress-mini">
                        <div class="progress-bar bg-primary" style="width: 50%;"></div>
                    </div>
                    <button class="btn btn-sm btn-outline-primary">Fortsetzen</button>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6 activity-card-wrapper" data-skill="numeracy">
        <div class="card activity-card h-100 position-relative">
            <span class="badge activity-type-badge bg-primary">Rechenkompetenz</span>
            <div class="card-body">
                <div class="d-flex align-items-start mb-3">
                    <div class="skill-icon me-3" style="background: rgba(33,150,243,0.1);">
                        <i class="bi bi-percent" style="color: #2196F3;"></i>
                    </div>
                    <div>
                        <h5 class="mb-1">Prozentsätze im Alltag</h5>
                        <p class="text-muted small mb-0">Mikroaufgabe - 7 Min.</p>
                    </div>
                </div>
                <p class="small">Berechnen Sie Rabatte, Mehrwertsteuer und Trinkgeld in alltäglichen Situationen.</p>
                <div class="d-flex flex-wrap gap-1 mb-3">
                    <span class="badge bg-light text-dark">Prozentsätze</span>
                    <span class="badge bg-light text-dark">Anwendung</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="progress flex-grow-1 me-3 progress-mini">
                        <div class="progress-bar bg-primary" style="width: 0%;"></div>
                    </div>
                    <button class="btn btn-sm btn-outline-primary">Starten</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Observable Signals Info -->
<div class="row mt-5">
    <div class="col-12">
        <div class="card bg-light border-0">
            <div class="card-body">
                <h5><i class="bi bi-broadcast me-2"></i>Beobachtbare Lernsignale</h5>
                <p class="text-muted">Während der Aktivitäten erfasst die Plattform folgende Signale zur Anpassung des Lernpfades:</p>
                <div class="row">
                    <div class="col-md-4">
                        <ul class="list-unstyled">
                            <li><i class="bi bi-check text-success me-2"></i>Richtige/falsche Antworten</li>
                            <li><i class="bi bi-arrow-repeat text-info me-2"></i>Anzahl der Versuche</li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <ul class="list-unstyled">
                            <li><i class="bi bi-clock text-warning me-2"></i>Aufgewendete Zeit</li>
                            <li><i class="bi bi-pencil text-primary me-2"></i>Antwortüberarbeitungen</li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <ul class="list-unstyled">
                            <li><i class="bi bi-graph-up text-success me-2"></i>Fortschritt zwischen Aktivitäten</li>
                            <li><i class="bi bi-box-arrow-right text-danger me-2"></i>Abbruch oder Ausdauer</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.querySelectorAll('.filter-chip').forEach(chip => {
    chip.addEventListener('click', function() {
        document.querySelectorAll('.filter-chip').forEach(c => {
            c.classList.remove('active');
            c.style.background = '';
        });

        this.classList.add('active');
        const skill = this.dataset.skill;

        if (skill === 'all') {
            this.style.background = '#4CAF50';
        } else {
            const colors = {
                'literacy': '#4CAF50',
                'numeracy': '#2196F3',
                'digital': '#9C27B0',
                'citizenship': '#FF9800'
            };
            this.style.background = colors[skill];
        }

        // Filter activities
        document.querySelectorAll('.activity-card-wrapper').forEach(card => {
            if (skill === 'all' || card.dataset.skill === skill) {
                card.style.display = '';
            } else {
                card.style.display = 'none';
            }
        });
    });
});
</script>
{% endblock %}
